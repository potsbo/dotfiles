#!/bin/bash

set -eux

brew_check() {
  if brew info $1 | grep "Not installed" > /dev/null 2>&1
  then
    echo "  + Installing $1..."
    brew install $1
  else
    echo "  + $1 found."
  fi
}

# Install brew
if test ! $(which brew)
then
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Check go
brew_check go

SRC_DIR=$HOME/src
export GOPATH=$HOME/.go
mkdir -p $GOPATH
mkdir -p $SRC_DIR
ln -s ~/src $GOPATH/src

go get github.com/motemen/ghq

export $PATH:$GOPATH/bin
ghq get github.com/potsbo/dotfiles
